
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us" >
<head>
<title>Pexip Infinity</title>
<link rel="stylesheet" type="text/css" href="style.css" />
<meta name="robots" content="noindex, nofollow" />
<script type="text/javascript" src="/static/webrtc/js/pexrtc.js"></script>
<script type="text/javascript" src="webui.js"></script>
<script type="text/javascript">
window.onload = function()
{
    var url = window.location.href;
    var params = url.substr(url.indexOf("?")+1).split("&");
    var i;
    var qp = {};
    for (i=0;i<params.length;i++) {
        var kv = params[i].split("=");
        qp[kv[0]] = kv[1];
    }
    console.log(qp);

    var source = "";
    if ("join_pres" in qp) {
        source = "screen";
    }

    //pin, source
    initialise(document.domain, qp['alias'], qp['bandwidth'], qp['name'], "", source);
}
</script>

<meta name="robots" content="NONE,NOARCHIVE" />
</head>

<body>

<!-- Container -->
<div id="container" class="site">
    <!-- Header -->
    <header id="header" class="branding" role="banner">

        <img src="img/logo.png" alt="Pexip">
        <h1>Infinity</h1>

    </header>
    <!-- END Header -->

    <!-- Content -->

  <div id="selectrole" class="main site join hidden">
    <h2>Select your role for this conference:</h2>
    <form method="get">
        <div class="cf">
            <input type="radio" value="1" name="role" id="id_guest" class="webrtcinput" checked>
            <label for="id_guest">Guest</label>
        </div>
        <div class="cf">
            <input type="radio" value="2" name="role" id="id_host" class="webrtcinput">
            <label for="id_host">Host</label>
        </div>

        <input type="button" value="Join Conference" name="join" id="id_join" class="webrtcbutton" onClick="submitSelectRole();">
    </form>
  </div>


  <div id="pinentry" class="main site join hidden">
    <form method="get">
        <label for="id_pin" class="vh">Enter the conference PIN</label>
        <input type="password" value="" name="pin" id="id_pin" placeholder="Enter the conference PIN" required class="webrtcinput">

        <input type="button" value="Join Conference" name="join" id="id_join" class="webrtcbutton" onClick="submitPinEntry();">
    </form>
  </div>


  <div id="ivrentry" class="main site join hidden">
    <form method="get">
        <label for="id_room" class="vh">Enter the target extension</label>
        <input type="text" value="" name="room" id="id_room" placeholder="Enter the target extension" required class="webrtcinput">

        <input type="button" value="Join Conference" name="join" id="id_join" class="webrtcbutton" onClick="submitIVREntry();">
    </form>
  </div>


  <div id="maincontent" class="main cf hidden">
    <section class="top">
      <aside class="participants"><!-- List of participants -->
        <h2>Participants (<span id="rosterheading"></span>)</h2>
        <div id="rosterlist" class="rosterlist">
          <h4>Hosts</h4>
          <ul id="rosterul">
          </ul>
          <h4>Guests</h4>
          <ul id="guestrosterul">
          </ul>
        </div>
        <div id="selfview" class="selfview" hidden>
          <video id="selfvideo" autoplay="autoplay" muted="true">
          </video>
        </div>
      </aside>
      <div id="videocontainer" class="videocontainer">
        <video width="100%" height="100%" id="video" autoplay="autoplay" poster="img/spinner.gif"></video>
      </div>
    </section>

    <footer id="controls" class="controls cf">
      <ul>
        <li><a id="id_selfview" class="webrtcbutton btn-selfview" onclick="toggleSelfview();">Show Selfview</a></li>
        <li><a id="id_muteaudio" class="webrtcbutton btn-audio" onclick="muteAudioStreams();">Mute Audio</a></li>
        <li><a id="id_mutevideo" class="webrtcbutton btn-video" onclick="muteVideoStreams();">Mute Video</a></li>
        <li><a id="id_fullscreen" class="webrtcbutton btn-fullscreen inactive" onclick="goFullscreen();">Fullscreen</a></li>
        <li><a id="id_screenshare" class="webrtcbutton btn-presentscreen inactive" onclick="presentScreen();">Present Screen</a></li>
        <li><a id="id_presentation" class="webrtcbutton btn-presentation inactive" onclick="togglePresentation();">No Presentation Active</a></li>
        <li><a id="id_disconnect" class="webrtcbutton btn-disconnect" onclick="window.location='index.html';">Disconnect</a></li>
      </ul>

      <hr />

      <ul>
        <li><a onclick="id_muteaudioplayback.click()">Mute Audio Playback <input id="id_muteaudioplayback" type="checkbox" onchange="muteAudioPlayback(this.checked)" onclick="event.stopPropagation()" /></a></li>
        <li><a onclick="rtc.setMuteAllGuests(true)">Mute all Guests</a></li>
        <li><a onclick="rtc.setMuteAllGuests(false)">Unmute all Guests</a></li>
        <li><a onclick="rtc.disconnectAll()">Disconnect All</a></li>
      </ul>
    </footer>

    <hr />

    <table>
        <tr><td><h3>Dial out</h3></td></tr>
        <tr><td>
        <label>
            URI
            <input id="dialoutUrl"/>
        </label>
        </td></tr>
        <tr><td>
        <label>
            Protocol
            <select id="dialoutProtocol">
                <option value="sip">SIP</option>
                <option value="h323">H323</option>
                <option value="rtmp">RTMP</option>
                <option value="mssip">MSSIP</option>
            </select>
        </label>
        </td></tr>
        <tr><td>
        <label>
            Role
            <select id="dialoutRole">
                <option value="host">host</option>
                <option value="guest">guest</option>
            </select>
        </label>
        </td></tr>
        <tr><td>
            <input type="button" value="Dial Out" onclick="dialOut(dialoutUrl.value, dialoutProtocol.value, dialoutRole.value)"/>
        </td></tr>
    </table>

    <hr />


    <table>
        <tr><td><h3 id="pdname">Select a participant in the roster</h3></td></tr>
        <tr><td>
        <pre id="pddata"></pre>
        </td></tr>
        <tr><td>
            Transfer
        </td></tr>
        <tr><td>
            <label>
                uuid
                <input id="pdtransferuuid" disabled="disabled" />
            </label>
        </td></tr>
        <tr><td>
            <label>
                destination
                <input id="pdtransferdestination" />
            </label>
        </td></tr>
        <tr><td>
            <label>
                Role
                <select id="pdtransferrole">
                    <option value="host">host</option>
                    <option value="guest">guest</option>
                </select>
            </label>
        </td></tr>
        <tr><td>
            <label>
                PIN
                <input id="pdtransferpin" />
            </label>
        </td></tr>
        <tr><td>
            <input type="button" value="Transfer" onclick="transfer()" />
        </td></tr>
        <tr><td>
        </td></tr>
        <tr><td>
        </td></tr>
    </table>
  </div>

    <!-- END Content -->

    <div id="footer"> </div>
</div>
<!-- END Container -->

</body>
</html>
